{% extends 'base.html' %}

{% block title %}History â€” PIHTI Vacuum{% endblock %}

{% block content %}
<script>window.historyMode = true;</script>
<div class="history-page">
<div class="history-scroll-area">
    <div class="history-header-sticky">
        <h1 class="history-title" style="text-align: center;">History
            <a href="{{ url_for('download_logs') }}" class="btn-download">Download Logs (CSV)</a>
        </h1>
    </div>
<div class="history-layout">
    <div class="history-left">
        <div class="history-diagram">
            <div id="diagram-container"></div>
            <div id="tooltip"></div>
        </div>
        <div class="history-calendar-wrapper" id="calendar-wrapper">
            <div class="history-calendar-nav">
                <button type="button" id="calendar-toggle" class="calendar-toggle" aria-label="Toggle calendar">&#9660;</button>
                <button type="button" id="calendar-prev" aria-label="Previous month">&larr;</button>
                <span id="calendar-month-label"></span>
                <div class="calendar-nav-right">
                    <button type="button" id="calendar-today">Today</button>
                    <button type="button" id="calendar-next" aria-label="Next month">&rarr;</button>
                </div>
            </div>
            <div class="history-calendar-body" id="calendar-body">
                <div id="calendar-grid" class="history-calendar-grid"></div>
            </div>
        </div>
    </div>
    <div class="history-timeline-panel">
        <h2>Timeline</h2>
        <p class="history-hint">Click an event to see the diagram state at that moment.</p>
        <div id="history-timeline-content">
            <ul id="history-events" class="history-events"></ul>
            <p id="history-no-events" class="history-no-events" style="display:none;">No events on this day</p>
        </div>
    </div>
</div>
</div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/diagram.js') }}"></script>
<script src="{{ url_for('static', filename='js/history.js') }}"></script>
{% endblock %}
