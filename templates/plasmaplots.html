{% extends 'base.html' %}

{% block title %}Plasma Plots{% endblock %}

{% block content %}
<h1>Select a CSV File to Plot</h1>
<form id="fileForm">
    <select name="file" id="fileDropdown">
        {% for file in files %}
        <option value="{{ file }}">{{ file }}</option>
        {% endfor %}
    </select>
    <button type="submit">Plot</button>
</form>

<div id="plotArea"></div>
{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#fileForm').on('submit', function (e) {
            e.preventDefault();

            $.ajax({
                url: '/plot',
                method: 'POST',
                data: $(this).serialize(),
                success: function (response) {
                    $('#plotArea').html(response.plot);
                },
                error: function (xhr, status, error) {
                    console.error('Error:', error);
                }
            });
        });
    });
</script>
{% endblock %}